'use strict';const express=require("express"),app=express(),router=express.Router(),Testimony=require("../../../models/Testimony"),Booking=require("../../../models/Booking"),Contact=require("../../../models/Contact");router.all("/*",(a,e,b)=>{a.app.locals.layout="user";b()});
router.get("/",(a,e)=>{Testimony.find({user:a.session.user}).then(b=>{let f=Object.keys(b).length;Contact.find({user:a.session.user}).then(d=>{let g=Object.keys(d).length;Booking.find({user:a.session.user}).then(c=>{c=Object.keys(c).length;e.render("accounts/user/index",{testimonyCount:f,bookingCount:c,contactCount:g,status:a.session.user.file&&a.session.user.fullname?"100%":"50%"})}).catch(c=>console.log(c))}).catch(d=>console.log(d))}).catch(b=>console.log(b))});module.exports=router;